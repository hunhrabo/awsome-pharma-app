(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(49)},25:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),l=a.n(r),s=(a(25),a(5)),c=a.n(s),u=a(18),i=a(2),m=a(3),d=a.n(m),f=a(6),p=function(e){var t=e.salesPerPerson,a=Object(n.useState)(t),r=Object(i.a)(a,2),l=r[0],s=r[1],c=Object(n.useState)("collapsed"),u=Object(i.a)(c,2),m=u[0],d=u[1],p=Object(n.useState)("revenue"),h=Object(i.a)(p,2),b=h[0],v=h[1];Object(n.useEffect)(function(){s(t.map(function(e){return{name:e.name,totalRevenue:e.monthlySales.map(function(e){return e.totalRevenue}).reduce(function(e,t){return e+t}),totalProductsSold:e.monthlySales.map(function(e){return e.totalProductsSold}).reduce(function(e,t){return e+t})}}).sort(function(e,t){return t.totalRevenue-e.totalRevenue}))},[t]);var E="collapsed"===m?"Show more...":"Show less...",y="collapsed"===m?3:l.length;return o.a.createElement("div",{className:"table-container"},o.a.createElement("h2",null,"Top salespersons"),o.a.createElement("table",{className:"top-revenue-table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"table-header"},o.a.createElement("th",null,o.a.createElement("p",null,"Name")),o.a.createElement("th",{className:"table-tab"},o.a.createElement("p",{onClick:function(){var e=Object(f.a)(l);e.sort(function(e,t){return t.totalRevenue-e.totalRevenue}),v("revenue"),s(e)}},"Total revenue (EUR)",o.a.createElement("i",{className:"fas fa-chevron-down",style:{visibility:"revenue"===b?"visible":"hidden"}}))),o.a.createElement("th",{className:"table-tab"},o.a.createElement("p",{onClick:function(){var e=Object(f.a)(l);e.sort(function(e,t){return t.totalProductsSold-e.totalProductsSold}),v("products"),s(e)}},"Total products sold",o.a.createElement("i",{className:"fas fa-chevron-down",style:{visibility:"products"===b?"visible":"hidden"}})))),l.map(function(e,t){return o.a.createElement("tr",{key:e.name,style:{visibility:t>=y?"collapse":"visible"}},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.totalRevenue),o.a.createElement("td",null,e.totalProductsSold))}))),o.a.createElement("div",{className:"btn-container"},o.a.createElement("button",{onClick:function(){d("collapsed"===m?"open":"collapsed")}},E)))},h=a(19),b=a.n(h),v=function(e){var t=e.salesPerCustomers,a=e.months,r=Object(n.useState)([]),l=Object(i.a)(r,2),s=l[0],c=l[1],u=Object(n.useState)("total"),m=Object(i.a)(u,2),d=m[0],f=m[1];Object(n.useEffect)(function(){if("total"!==d){var e=t.find(function(e){return e.name===d});c(e.monthlySales.map(function(e){return{month:e,totalProductsSold:e.totalProductsSold}}))}else"total"===d&&c(a.map(function(e){var a=t.map(function(t){return t.monthlySales.find(function(t){return t.month===e}).totalProductsSold}).reduce(function(e,t){return e+t});return{month:e,totalProductsSold:a}}))},[t,a,d]);var p={options:{plotOptions:{bar:{dataLabels:{position:"top"}}},chart:{fontFamily:"Rubik"},dataLabels:{enabled:!0,formatter:function(e){return Number(e)},offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:a,position:"bottom",labels:{offsetY:0},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0,offsetY:-35}},fill:{gradient:{shade:"light",type:"horizontal",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[50,0,100,100]}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!0,formatter:function(e){return Number(e)}},title:{text:"Products sold",style:{fontSize:"16px"}}},title:{text:"Monthly sales - ".concat(d,", 2018"),position:"top",floating:!0,offsetY:-5,align:"center",style:{fontSize:"16px",color:"#444"}}},series:[{name:"Sales production",data:s.map(function(e){return e.totalProductsSold})}]};return o.a.createElement("div",{className:"chart-container"},o.a.createElement("h2",null,"Total products sold"),o.a.createElement("form",{className:"customer-select-form"},o.a.createElement("label",{htmlFor:"customer-select"},"Select customer:"),o.a.createElement("select",{name:"customer-select",value:d,onChange:function(e){f(e.target.value)}},o.a.createElement("option",{value:"total"},"Total"),t.map(function(e){return o.a.createElement("option",{key:e.name,value:e.name},e.name)}))),o.a.createElement(b.a,{className:"chart",options:p.options,series:p.series,type:"bar",height:"450"}))},E=["January","February","March","April","May","June","July","August","September","October","November","December"],y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),m=s[0],f=s[1];return Object(n.useEffect)(function(){(function(){var e=Object(u.a)(c.a.mark(function e(){var t,a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat("/api","/salespersons")).then(function(e){return e.data.data.filter(function(e){return""!==e.id})});case 2:return t=e.sent,e.next=5,d.a.get("".concat("/api","/orders")).then(function(e){return e.data.data.filter(function(e){return""!==e.account})});case 5:return a=e.sent,e.next=8,d.a.get("".concat("/api","/products")).then(function(e){return e.data.data.filter(function(e){return""!==e["product name"]})});case 8:return n=e.sent,e.abrupt("return",{salespersons:t,orders:a,products:n});case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().then(function(e){var t=e.salespersons.map(function(t){var a={};a.name=t.name,a.personId=t.id;var n=e.orders.filter(function(e){return e["salesperson id"]===t.id});return a.monthlySales=E.map(function(e){return{month:e,totalRevenue:0,totalProductsSold:0}}),n.forEach(function(t){var n=Number(t["order date"].split("/")[0])-1,o=Number(t["number of product sold"]),r=t["product id"],l=e.products.find(function(e){return e["product id"]===r}),s=Number(l["unit price"]);a.monthlySales[n].totalRevenue+=o*s,a.monthlySales[n].totalProductsSold+=o}),a}),a=new Set(e.orders.map(function(e){return e.account}));return{salesPerPerson:t,salesPerCustomer:Array.from(a).map(function(t){var a={};a.name=t;var n=e.orders.filter(function(e){return e.account===t});return a.monthlySales=E.map(function(e){return{month:e,totalProductsSold:0}}),n.forEach(function(e){var t=Number(e["order date"].split("/")[0])-1,n=Number(e["number of product sold"]);a.monthlySales[t].totalProductsSold+=n}),a})}}).then(function(e){r(e.salesPerPerson),f(e.salesPerCustomer)})},[]),0===a.length||0===m.length?o.a.createElement("div",{className:"loading-div"},o.a.createElement("h2",{className:"loading-text"},"Loading..."),o.a.createElement("i",{className:"fas fa-spinner loading-icon"})):o.a.createElement(o.a.Fragment,null,o.a.createElement("main",{className:"content-wrap"},o.a.createElement("h1",null,"AwsomePharma Sales Team Annual Report"),o.a.createElement(p,{salesPerPerson:a}),o.a.createElement(v,{salesPerCustomers:m,months:E})),o.a.createElement("footer",{className:"footer"},"Created by Tamas Hrabovszki"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.6004e0a4.chunk.js.map